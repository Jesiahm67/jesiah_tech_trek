<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body style="background-image: linear-gradient(to right, lightblue, yellow);">
  {% include "components/navbar.html.jinja"%}
  <h1 style="text-align: center" class="text-4xl font-bold underline"> Cart products</h1>
  <br>
  <br>
  <main
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5 max-w-4xl mx-auto p-6 mb-5 bg-blue-400 rounded-lg shadow-lg border-4 border-blue-600">
    {# Use to make for loops in html.jinja #}
    {% for x in cart_items %}
    {# use grid to be rigid layout #}
    <div
      class="grid gap-2 border-4 border-red-400 p-4 rounded-lg bg-lime-100 shadow-md hover:shadow-lg transition-shadow duration-300">
      {# Set height of image, and use mx-auto to center #}
      <img class="h-25 mx-auto bg-orange-300 p-2 rounded-lg shadow-md " src=" {{ x['Image'] }} ">
      <div class="text-center font-bold text-sm">{{ x["Name"] }} </div>
      <div class="text-center font-bold text-sm">{{ x["Category"] }} </div>
      <div class="text-center font-bold text-sm">
        {% if x['Quantity'] > 0 %}
        ${{ x['Price'] * x['Quantity'] }}
        {% else %}
        <span class="text-red-500 italic">Out of Stock</span>
        {% endif %}
        <form>
          <input type="number" name="qty" value="{{ x['Quantity'] }}"
            class="border-2 border-blue-600 rounded-md p-2 w-20 text-center">
        </form method="post" action="/cart/{{ x[ProductID] }}/update_qty"
          class="flex flex-col sm:flex-row justify-center items-center gap-4 update-quantity-form">
          <form method="POST" action="/cart/{{ x['ProductID'] }}/delete_qty">
    <input type="hidden" name="qty" value="0">
    <button type="submit" class="text-red-600 hover:text-red-800 text-xs font-bold underline mt-2">
        Remove Item
    </button>
</form>
        <button type="submit"
          class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md shadow-md transition duration-150 ease-in-out btn-sm">
          Update Quantity
      </div>
      {# <div class="text-center font-bold text-sm">{{ x["Name"] }} </div> Shows the name of the product from your
      database#}
      <div class="text-center font-bold text-sm">One equals ${{x["Price"]}}</div>
      <div class="text-center font-bold text-sm">${{x['Price'] * x['Quantity']}}</div>
      
      {# <div class="text-center font-bold text-sm">${{x['Price'] * x['Quantity']}}</div> Shows the total of the product
      depending on the amount of quantity and the price #}
    </div>


    {# Used to end loops in html.jinja #}
    {% endfor%}
  </main>
</body>

</html>